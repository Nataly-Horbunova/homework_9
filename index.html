<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo list</title>
</head>

<body>

    <script>
        const toDoList = {
            tasks: [
                {
                    task: 'name1',
                    state: false
                },

                {
                    task: 'name2',
                    state: true
                },
                {
                    task: 'name3',
                    state: true
                },

                {
                    task: 'name4',
                    state: true
                }
            ],

            addTask(newTask) {
                if (!newTask.trim()) {
                    return
                }

                const findTask = this.tasks.find(item => item.task === newTask);

                if (!findTask) {
                    const newTaskObj = {
                        task: newTask,
                        state: false
                    }

                    this.tasks.push(newTaskObj);
                }
            },

            deleteTask(deleteTask) {
                const deleteTaskIndex = this.tasks.findIndex(item => item.task === deleteTask);

                if (deleteTaskIndex >= 0) {
                    this.tasks.splice(deleteTaskIndex, 1);
                }
            },

            editTask(taskToEdit, taskEdited, stateEdited) {
                const editTaskIndex = this.tasks.findIndex(item => item.task === taskToEdit);

                if (editTaskIndex >= 0) {
                    this.tasks[editTaskIndex].task = taskEdited;
                    this.tasks[editTaskIndex].state = stateEdited;
                }
            },

            toggleState(task) {
                const index = this.tasks.findIndex(item => item.task === task);

                if (index >= 0) {
                    this.tasks[index].state = !this.tasks[index].state;
                }

            },

            statisctics() {
                return this.tasks.reduce((accum, item) => {

                    item.state ? accum.active++ : accum.completed++;

                    return accum;
                }, {
                    active: 0,
                    completed: 0,
                    total: this.tasks.length
                })
            }
        }

        for (let prop in toDoList) {
            Object.defineProperty(toDoList, prop, {
                configurable: false,
                writable: false
            });
        }

        const newTask = prompt('Введите новую задачу', '');
        toDoList.addTask(newTask);

        const taskDelete = prompt('Введите задачу, которую нужно удалить', '');
        toDoList.deleteTask(taskDelete);

        const taskToEdit = prompt('Введите задачу, которую нужно отредактировать', '');
        const taskEdited = prompt('Введите отредактированную задачу', '');
        const stateEdited = confirm('Задача выполнена?')
        toDoList.editTask(taskToEdit, taskEdited, stateEdited);

        const task = prompt('Введите задачу, которой нужно поменять статус', '');
        toDoList.toggleState(task);

        toDoList.statisctics();

        console.log(toDoList);

    </script>

</body>

</html>